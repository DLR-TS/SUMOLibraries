<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>any_connection::connection_id</title>
<link rel="stylesheet" href="../../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../../index.html" title="Chapter 1. Boost.MySQL">
<link rel="up" href="../boost__mysql__any_connection.html" title="any_connection">
<link rel="prev" href="set_meta_mode.html" title="any_connection::set_meta_mode">
<link rel="next" href="connect.html" title="any_connection::connect">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="set_meta_mode.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../boost__mysql__any_connection.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="connect.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="mysql.ref.boost__mysql__any_connection.connection_id"></a><a class="link" href="connection_id.html" title="any_connection::connection_id">any_connection::connection_id</a>
</h5></div></div></div>
<p>
          <a class="indexterm" name="id47945"></a>
Retrieves the connection id associated to the
          current session.
        </p>
<h6>
<a name="mysql.ref.boost__mysql__any_connection.connection_id.h0"></a>
          <span class="phrase"><a name="mysql.ref.boost__mysql__any_connection.connection_id.synopsis"></a></span><a class="link" href="connection_id.html#mysql.ref.boost__mysql__any_connection.connection_id.synopsis">Synopsis</a>
        </h6>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">optional</span><span class="special">&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">uint32_t</span> <span class="special">&gt;</span>
<span class="identifier">connection_id</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
</pre>
<h6>
<a name="mysql.ref.boost__mysql__any_connection.connection_id.h1"></a>
          <span class="phrase"><a name="mysql.ref.boost__mysql__any_connection.connection_id.description"></a></span><a class="link" href="connection_id.html#mysql.ref.boost__mysql__any_connection.connection_id.description">Description</a>
        </h6>
<p>
          If a session has been established, returns its associated connection id.
          If no session has been established (i.e. <a class="link" href="async_connect.html" title="any_connection::async_connect"><code class="computeroutput"><span class="identifier">async_connect</span></code></a> hasn't been called
          yet) or the session has been terminated (i.e. <a class="link" href="async_close.html" title="any_connection::async_close"><code class="computeroutput"><span class="identifier">async_close</span></code></a> has been called),
          an empty optional is returned.
        </p>
<p>
          The connection id is a 4 byte value that uniquely identifies a client session
          at a given point in time. It can be used with the <a href="https://dev.mysql.com/doc/refman/8.4/en/kill.html" target="_top"><code class="computeroutput"><span class="identifier">KILL</span></code></a> SQL statement to cancel
          queries and terminate connections.
        </p>
<p>
          The server sends the connection id assigned to the current session as part
          of the handshake process. The value is stored and made available through
          this function. The same id can also be obtained by calling the <a href="https://dev.mysql.com/doc/refman/8.4/en/information-functions.html#function_connection-id" target="_top">CONNECTION_ID()</a>
          SQL function. However, this function is faster and more reliable, since
          it does not entail communication with the server.
        </p>
<p>
          This function is equivalent to the <a href="https://dev.mysql.com/doc/c-api/8.0/en/mysql-thread-id.html" target="_top"><code class="computeroutput"><span class="identifier">mysql_thread_id</span></code></a> function in the
          C connector. This function works properly in 64-bit systems, as opposed
          to what the official docs suggest (see <a href="https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-5.html" target="_top">this
          changelog</a>).
        </p>
<p>
          It is safe to call this function while an async operation is outstanding,
          except for <a class="link" href="async_connect.html" title="any_connection::async_connect"><code class="computeroutput"><span class="identifier">async_connect</span></code></a> and <a class="link" href="async_close.html" title="any_connection::async_close"><code class="computeroutput"><span class="identifier">async_close</span></code></a>.
        </p>
<h6>
<a name="mysql.ref.boost__mysql__any_connection.connection_id.h2"></a>
          <span class="phrase"><a name="mysql.ref.boost__mysql__any_connection.connection_id.exception_safety"></a></span><a class="link" href="connection_id.html#mysql.ref.boost__mysql__any_connection.connection_id.exception_safety">Exception
          safety</a>
        </h6>
<p>
          No-throw guarantee.
        </p>
</div>
<div class="copyright-footer">Copyright © 2019-2024 Ruben Perez<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="set_meta_mode.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../boost__mysql__any_connection.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="connect.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
