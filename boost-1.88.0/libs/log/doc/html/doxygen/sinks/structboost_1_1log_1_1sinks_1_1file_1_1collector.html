<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Struct collector</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Chapter 1. Boost.Log v2">
<link rel="up" href="../../sinks.html#doxygen.sinks.text__file__backend_8hpp" title="Header &lt;boost/log/sinks/text_file_backend.hpp&gt;">
<link rel="prev" href="syslog__constants_8hpp_1ae9e8363fc49057bb90f93aeaec1f9bc7.html" title="Function make_facility">
<link rel="next" href="classboost_1_1log_1_1sinks_1_1file_1_1rotation__at__time__interval.html" title="Class rotation_at_time_interval">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="syslog__constants_8hpp_1ae9e8363fc49057bb90f93aeaec1f9bc7.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../sinks.html#doxygen.sinks.text__file__backend_8hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="classboost_1_1log_1_1sinks_1_1file_1_1rotation__at__time__interval.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Struct collector</span></h2>
<p>boost::log::sinks::file::collector — Base class for file collectors. </p>
</div>
<h2 class="refsynopsisdiv-title">Synopsis</h2>
<div class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../sinks.html#doxygen.sinks.text__file__backend_8hpp" title="Header &lt;boost/log/sinks/text_file_backend.hpp&gt;">boost/log/sinks/text_file_backend.hpp</a>&gt;

</span>
<span class="keyword">struct</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="special">{</span>

  <span class="comment">// <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#id165-bb">public member functions</a></span>
  <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1ac0476335435e0361ad0c8231a958c64e"><span class="identifier">collector</span></a><span class="special">(</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span>
  <span class="keyword">virtual</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1adceaef35e51f9d908438fbc850aa7502"><span class="special">~</span><span class="identifier">collector</span></a><span class="special">(</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span>
  <span class="keyword">virtual</span> <span class="keyword">void</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a0f6d6ac08cff4d4ccb441bd76e506845"><span class="identifier">store_file</span></a><span class="special">(</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
  <span class="keyword">virtual</span> <span class="keyword">bool</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a58dac2c18cf91ecef8ff95524baf2948"><span class="identifier">is_in_storage</span></a><span class="special">(</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="keyword">const</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
  <span class="keyword">virtual</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1scan__result.html" title="Struct scan_result">scan_result</a> 
  <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a5dd0cebc024f917937f9b19faab9cb68"><span class="identifier">scan_for_files</span></a><span class="special">(</span><span class="identifier">scan_method</span><span class="special">,</span> <span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="special">=</span> <span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span><span class="special">(</span><span class="special">)</span><span class="special">)</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
  <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1ade57ca1a7e9a0a19cec1ed1ee801c351"><span class="identifier">collector</span></a><span class="special">(</span><a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="special">&amp;</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html#doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1acfd2f0d47df0afa8f6fae116890d73b1"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="id70846"></a><h2>Description</h2>
<p>All file collectors, supported by file sink backends, should inherit this class. </p>
<div class="refsect2">
<a name="id70849"></a><h3>
<a name="id165-bb"></a><code class="computeroutput">collector</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1ac0476335435e0361ad0c8231a958c64e"></a><span class="identifier">collector</span><span class="special">(</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span></pre>
<p>Default constructor </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">virtual</span> <a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1adceaef35e51f9d908438fbc850aa7502"></a><span class="special">~</span><span class="identifier">collector</span><span class="special">(</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span></pre>
<p>Virtual destructor </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">virtual</span> <span class="keyword">void</span> <a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a0f6d6ac08cff4d4ccb441bd76e506845"></a><span class="identifier">store_file</span><span class="special">(</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span> src_path<span class="special">)</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span></pre>
<p>The function stores the specified file in the storage. May lead to an older file deletion and a long file moving.</p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">src_path</code></span></p></td>
<td><p>The name of the file to be stored </p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">virtual</span> <span class="keyword">bool</span> <a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a58dac2c18cf91ecef8ff95524baf2948"></a><span class="identifier">is_in_storage</span><span class="special">(</span><span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span> src_path<span class="special">)</span> <span class="keyword">const</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span></pre>
<p>The function checks if the specified path refers to an existing file in the storage.</p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">src_path</code></span></p></td>
<td><p>The path to be checked </p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">virtual</span> <a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1scan__result.html" title="Struct scan_result">scan_result</a> 
<a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1a5dd0cebc024f917937f9b19faab9cb68"></a><span class="identifier">scan_for_files</span><span class="special">(</span><span class="identifier">scan_method</span> method<span class="special">,</span> 
               <span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span> <span class="keyword">const</span> <span class="special">&amp;</span> pattern <span class="special">=</span> <span class="identifier">filesystem</span><span class="special">::</span><span class="identifier">path</span><span class="special">(</span><span class="special">)</span><span class="special">)</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span></pre>
<p>Scans the target directory for the files that have already been stored. The found files are added to the collector in order to be tracked and erased, if needed.</p>
<p>The function may scan the directory in two ways: it will either consider every file in the directory a log file, or will only consider files with names that match the specified pattern. The pattern may contain the following placeholders:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><p>y, Y, m, d - date components, in Boost.DateTime meaning. </p></li>
<li class="listitem"><p>H, M, S, f - time components, in Boost.DateTime meaning. </p></li>
<li class="listitem"><p>N - numeric file counter. May also contain width specification in printf-compatible form (e.g. %5N). The resulting number will always be zero-filled. </p></li>
<li class="listitem"><p>%% - a percent sign</p></li>
</ul></div>
<p>
All other placeholders are not supported.</p>
<p>

</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>In case if <span class="emphasis"><em>method</em></span> is <code class="computeroutput">scan_matching</code> the effect of this function is highly dependent on the <span class="emphasis"><em>pattern</em></span> definition. It is recommended to choose patterns with easily distinguished placeholders (i.e. having delimiters between them). Otherwise either some files can be mistakenly found or not found, which in turn may lead to deletion of an unintended file. </p></td></tr>
</table></div>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">method</code></span></p></td>
<td><p>The method of scanning. If <code class="computeroutput">no_scan</code> is specified, the call has no effect. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">pattern</code></span></p></td>
<td><p>The file name pattern if <span class="emphasis"><em>method</em></span> is <code class="computeroutput">scan_matching</code>. Otherwise the parameter is not used. </p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>The result of filesystem scanning. The last file counter is only populated if <span class="emphasis"><em>method</em></span> is <code class="computeroutput">scan_matching</code>, the <span class="emphasis"><em>pattern</em></span> contains N placeholder, and at least one file matching the pattern is found.</p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem"><pre class="literallayout"><a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1ade57ca1a7e9a0a19cec1ed1ee801c351"></a><span class="identifier">collector</span><span class="special">(</span><a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="special">&amp;</span> <a name="doxygen.sinks.structboost_1_1log_1_1sinks_1_1file_1_1collector_1acfd2f0d47df0afa8f6fae116890d73b1"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><a class="link" href="structboost_1_1log_1_1sinks_1_1file_1_1collector.html" title="Struct collector">collector</a> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span></pre></li>
</ol></div>
</div>
</div>
</div>
<div class="copyright-footer">Copyright © 2007-2024 Andrey Semashev<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="syslog__constants_8hpp_1ae9e8363fc49057bb90f93aeaec1f9bc7.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../sinks.html#doxygen.sinks.text__file__backend_8hpp"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="classboost_1_1log_1_1sinks_1_1file_1_1rotation__at__time__interval.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
