<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Class execution_monitor</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../index.html" title="Boost.Test">
<link rel="up" href="a00719.html" title="Header &lt;boost/test/execution_monitor.hpp&gt;">
<link rel="prev" href="a00904_1ad9dfa8b8077567a56c8474ccd2e21902.html" title="Type error_code">
<link rel="next" href="a00924.html" title="Class system_error">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="a00904_1ad9dfa8b8077567a56c8474ccd2e21902.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="a00719.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="a00924.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="doxygen.a00912"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class execution_monitor</span></h2>
<p>boost::execution_monitor — Function execution monitor. </p>
</div>
<h2 class="refsynopsisdiv-title">Synopsis</h2>
<div class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="a00719.html" title="Header &lt;boost/test/execution_monitor.hpp&gt;">boost/test/execution_monitor.hpp</a>&gt;

</span>
<span class="keyword">class</span> <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>

  <span class="comment">// <a class="link" href="a00912.html#id26-bb">public member functions</a></span>
  <a class="link" href="a00912.html#doxygen.a00912_1abf8c5dcfcbdb60ab20fd778c09f7f820"><span class="identifier">execution_monitor</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">int</span> <a class="link" href="a00912.html#doxygen.a00912_1a6e5bb9bb9bceaa52644920790193da9a"><span class="identifier">execute</span></a><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="a00912.html#doxygen.a00912_1aa3dd353a18e899648646b01d8757b19b"><span class="identifier">vexecute</span></a><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">void</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="a00912.html#doxygen.a00912_1a4eff52558e85f85d314208b83cf44750"><span class="identifier">erase_exception_translator</span></a><span class="special">(</span><span class="identifier">const_string</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> ExceptionType<span class="special">&gt;</span> 
    <span class="keyword">void</span> <a class="link" href="a00912.html#doxygen.a00912_1aceae7fc819b420cc9c032ae94079c628"><span class="identifier">erase_exception_translator</span></a><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">type</span><span class="special">&lt;</span> <span class="identifier">ExceptionType</span> <span class="special">&gt;</span> <span class="special">*</span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="a00912.html#id27-bb">private member functions</a></span>
  <span class="keyword">int</span> <a class="link" href="a00912.html#doxygen.a00912_1acfe5198520c5cd8ec73c313c04f80308"><span class="identifier">catch_signals</span></a><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="a00912.html#doxygen.a00912public-data-members">public data members</a></span>
  <span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a class="link" href="a00912.html#doxygen.a00912_1afb952a1fe2fc265981a44865e1e17a05"><span class="identifier">p_catch_system_errors</span></a><span class="special">;</span>  <span class="comment">// Should monitor catch system errors. </span>
  <span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a class="link" href="a00912.html#doxygen.a00912_1afcad434249db997e4606468cab73a5d3"><span class="identifier">p_auto_start_dbg</span></a><span class="special">;</span>  <span class="comment">// Should monitor try to attach debugger in case of caught system error. </span>
  <span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="special">&gt;</span> <a class="link" href="a00912.html#doxygen.a00912_1aae1990c1066c2da9e3fabe733681c589"><span class="identifier">p_timeout</span></a><span class="special">;</span>  <span class="comment">// Specifies the seconds that elapse before a timer_error occurs. </span>
  <span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a class="link" href="a00912.html#doxygen.a00912_1a7936d976686e92494f18de4dc8c36e6b"><span class="identifier">p_use_alt_stack</span></a><span class="special">;</span>  <span class="comment">// Should monitor use alternative stack for the signal catching. </span>
  <span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">unsigned</span> <span class="special">&gt;</span> <a class="link" href="a00912.html#doxygen.a00912_1a4511f36e895f59481684060cf9741d1f"><span class="identifier">p_detect_fp_exceptions</span></a><span class="special">;</span>  <span class="comment">// Should monitor try to detect hardware floating point exceptions (!= 0), and which specific exception to catch. </span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="id51272"></a><h2>Description</h2>
<p>This class is used to uniformly detect and report an occurrence of several types of signals and exceptions, reducing various errors to a uniform <a class="link" href="a00904.html" title="Class execution_exception">execution_exception</a> that is returned to a caller.</p>
<p>The <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> behavior can be customized through a set of public parameters (properties) associated with the <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> instance. All parameters are implemented as public unit_test::readwrite_property data members of the class <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a>. </p>
<div class="refsect2">
<a name="id51280"></a><h3>
<a name="id26-bb"></a><code class="computeroutput">execution_monitor</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><a name="doxygen.a00912_1abf8c5dcfcbdb60ab20fd778c09f7f820"></a><span class="identifier">execution_monitor</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>Default constructor initializes all execution monitor properties. </li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">int</span> <a name="doxygen.a00912_1a6e5bb9bb9bceaa52644920790193da9a"></a><span class="identifier">execute</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span> F<span class="special">)</span><span class="special">;</span></pre>Execution monitor entry point for functions returning integer value. <p>This method executes supplied function F inside a try/catch block and also may include other unspecified platform dependent error detection code.</p>
<p>This method throws an <a class="link" href="a00904.html" title="Class execution_exception">execution_exception</a> on an uncaught C++ exception, a hardware or software signal, trap, or other user exception.</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p><a class="link" href="a00912.html#doxygen.a00912_1a6e5bb9bb9bceaa52644920790193da9a">execute()</a> doesn't consider it an error for F to return a non-zero value. </p></td></tr>
</table></div>
<p>


</p>
<p><b>See Also: </b><a class="link" href="a00912.html#doxygen.a00912_1aa3dd353a18e899648646b01d8757b19b">vexecute</a> </p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">F</code></span></p></td>
<td><p>Function to monitor </p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>value returned by function call F(). </p></td>
</tr>
</tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="doxygen.a00912_1aa3dd353a18e899648646b01d8757b19b"></a><span class="identifier">vexecute</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">void</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span> F<span class="special">)</span><span class="special">;</span></pre>Execution monitor entry point for functions returning void. <p>This method is semantically identical to <a class="link" href="a00912.html#doxygen.a00912_1a6e5bb9bb9bceaa52644920790193da9a">execution_monitor::execute</a>, but doesn't produce any result code. 
</p>
<p><b>See Also: </b><a class="link" href="a00912.html#doxygen.a00912_1a6e5bb9bb9bceaa52644920790193da9a">execute</a> </p>
<p>
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">F</code></span></p></td>
<td><p>Function to monitor </p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="doxygen.a00912_1a4eff52558e85f85d314208b83cf44750"></a><span class="identifier">erase_exception_translator</span><span class="special">(</span><span class="identifier">const_string</span> tag<span class="special">)</span><span class="special">;</span></pre>Erases custom exception translator based on a tag. <p>Use the same tag as the one used during translator registration 
</p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">tag</code></span></p></td>
<td><p>tag associated with translator you wants to erase </p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> ExceptionType<span class="special">&gt;</span> 
  <span class="keyword">void</span> <a name="doxygen.a00912_1aceae7fc819b420cc9c032ae94079c628"></a><span class="identifier">erase_exception_translator</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">type</span><span class="special">&lt;</span> <span class="identifier">ExceptionType</span> <span class="special">&gt;</span> <span class="special">*</span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span></pre>Erases custom exception translator based on an exception type. <p>tparam ExceptionType Exception type for which you want to erase the translator </p>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="id51416"></a><h3>
<a name="id27-bb"></a><code class="computeroutput">execution_monitor</code> private member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><pre class="literallayout"><span class="keyword">int</span> <a name="doxygen.a00912_1acfe5198520c5cd8ec73c313c04f80308"></a><span class="identifier">catch_signals</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="special">)</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="special">&amp;</span> F<span class="special">)</span><span class="special">;</span></pre></li></ol></div>
</div>
<div class="refsect2">
<a name="id51440"></a><h3>
<a name="doxygen.a00912public-data-members"></a><code class="computeroutput">execution_monitor</code> 
        public
       public data members</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a name="doxygen.a00912_1afb952a1fe2fc265981a44865e1e17a05"></a><span class="identifier">p_catch_system_errors</span><span class="special">;</span></pre>
<p>The <span class="emphasis"><em>p_catch_system_errors</em></span> property is a boolean flag (default value is true) specifying whether or not <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> should trap system errors/system level exceptions/signals, which would cause program to crash in a regular case (without <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a>). Set this property to false, for example, if you wish to force coredump file creation. The Unit Test Framework provides a runtime parameter <code class="computeroutput">--catch_system_errors=yes</code> to alter the behavior in monitored test cases. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a name="doxygen.a00912_1afcad434249db997e4606468cab73a5d3"></a><span class="identifier">p_auto_start_dbg</span><span class="special">;</span></pre>
<p>The <span class="emphasis"><em>p_auto_start_dbg</em></span> property is a boolean flag (default value is false) specifying whether or not <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> should try to attach debugger in case system error is caught. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="special">&gt;</span> <a name="doxygen.a00912_1aae1990c1066c2da9e3fabe733681c589"></a><span class="identifier">p_timeout</span><span class="special">;</span></pre>
<p>The <span class="emphasis"><em>p_timeout</em></span> property is an integer timeout (in microseconds) for monitored function execution. Use this parameter to monitor code with possible deadlocks or infinite loops. This feature is only available for some operating systems (not yet Microsoft Windows). </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">bool</span> <span class="special">&gt;</span> <a name="doxygen.a00912_1a7936d976686e92494f18de4dc8c36e6b"></a><span class="identifier">p_use_alt_stack</span><span class="special">;</span></pre>
<p>The <span class="emphasis"><em>p_use_alt_stack</em></span> property is a boolean flag (default value is false) specifying whether or not <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> should use an alternative stack for the sigaction based signal catching. When enabled the signals are delivered to the <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> on a stack different from current execution stack, which is safer in case if it is corrupted by monitored function. For more details on alternative stack handling see appropriate manuals. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">unit_test</span><span class="special">::</span><span class="identifier">readwrite_property</span><span class="special">&lt;</span> <span class="keyword">unsigned</span> <span class="special">&gt;</span> <a name="doxygen.a00912_1a4511f36e895f59481684060cf9741d1f"></a><span class="identifier">p_detect_fp_exceptions</span><span class="special">;</span></pre>
<p>The <span class="emphasis"><em>p_detect_fp_exceptions</em></span> property is a boolean flag (default value is false) specifying whether or not <a class="link" href="a00912.html" title="Class execution_monitor">execution_monitor</a> should install hardware traps for the floating point exception on platforms where it's supported. </p>
</li>
</ol></div>
</div>
</div>
</div>
<div class="copyright-footer">Copyright © 2001-2022 Boost.Test contributors<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="a00904_1ad9dfa8b8077567a56c8474ccd2e21902.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="a00719.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="a00924.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
