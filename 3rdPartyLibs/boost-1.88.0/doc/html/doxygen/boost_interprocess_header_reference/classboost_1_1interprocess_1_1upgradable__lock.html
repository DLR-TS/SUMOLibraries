<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Class template upgradable_lock</title>
<link rel="stylesheet" href="../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../interprocess/indexes_reference.html#doxygen.boost_interprocess_header_reference.upgradable__lock_8hpp" title="Header &lt;boost/interprocess/sync/upgradable_lock.hpp&gt;">
<link rel="prev" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">
<link rel="next" href="classboost_1_1interprocess_1_1usduration.html" title="Class usduration">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="classboost_1_1interprocess_1_1sharable__lock.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../interprocess/indexes_reference.html#doxygen.boost_interprocess_header_reference.upgradable__lock_8hpp"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="classboost_1_1interprocess_1_1usduration.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template upgradable_lock</span></h2>
<p>boost::interprocess::upgradable_lock</p>
</div>
<h2 class="refsynopsisdiv-title">Synopsis</h2>
<div class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../interprocess/indexes_reference.html#doxygen.boost_interprocess_header_reference.upgradable__lock_8hpp" title="Header &lt;boost/interprocess/sync/upgradable_lock.hpp&gt;">boost/interprocess/sync/upgradable_lock.hpp</a>&gt;

</span><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> UpgradableMutex<span class="special">&gt;</span> 
<span class="keyword">class</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="comment">// types</span>
  <span class="keyword">typedef</span> <span class="identifier">UpgradableMutex</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a5638084b21b53bcff1ff1760b36c6382"></a><span class="identifier">mutex_type</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#id103-bb">public member functions</a></span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a68d8dac1f766e68900da742246e3a8c1"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">explicit</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a49fa914ef053f83c947044fa88ab8697"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a40b2c3d5a0a9fd771fe07ae504387da1"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span><span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1defer__lock__type.html" title="Struct defer_lock_type">defer_lock_type</a><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1ac188f1f038d567b04180d92af60c5ef9"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span><span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1accept__ownership__type.html" title="Struct accept_ownership_type">accept_ownership_type</a><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1aa7b6f931e2a5cf4e6a6fdda8357d671a"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span><span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1try__to__lock__type.html" title="Struct try_to_lock_type">try_to_lock_type</a><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> 
    <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1abc2a52295316a2eba52ec23b89cdef28"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1aee55a7076287ca703d041495b64da3df"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a><span class="special">&lt;</span> <span class="identifier">mutex_type</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1affe366f9e12737f528ffff2eef38f7bb"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1scoped__lock.html" title="Class template scoped_lock">scoped_lock</a><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span><span class="special">,</span> <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> 
    <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a49edf1be241f182290c1a7eb8419ed59"><span class="identifier">upgradable_lock</span></a><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">sharable_lock</a><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span><span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1try__to__lock__type.html" title="Struct try_to_lock_type">try_to_lock_type</a><span class="special">,</span> <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a78db6b83c240c5c723948b71415b9139"><span class="special">~</span><span class="identifier">upgradable_lock</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> <span class="special">&amp;</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a57a84a215dd842070e1ca8968125475b"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> <span class="special">&amp;&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a61ee4bc4a23cd960e478a86c1424f30e"><span class="identifier">lock</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a11a01e6076b245f7ed76174ec3589d27"><span class="identifier">try_lock</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> <span class="keyword">bool</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af8c802df78488052baee3d25dd594d4f"><span class="identifier">timed_lock</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a395b2447a0df20c51e31bda350b2a6b9"><span class="identifier">unlock</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e"><span class="identifier">owns</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a823dd0c2b6f5c0320cb4d26b0b3085b7"><span class="keyword">operator</span> <span class="identifier">unspecified_bool_type</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">mutex_type</span> <span class="special">*</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36"><span class="identifier">mutex</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">mutex_type</span> <span class="special">*</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a84ca78763a83e337b9011fcd762e3156"><span class="identifier">release</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1ac859b4e52df2cfa46512e10e171b315a"><span class="identifier">swap</span></a><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a><span class="special">&lt;</span> <span class="identifier">mutex_type</span> <span class="special">&gt;</span> <span class="special">&amp;</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="id-1.3.16.19.3.77.4.4"></a><h2>Description</h2>
<p><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> is meant to carry out the tasks for read-locking, unlocking, try-read-locking and timed-read-locking (recursive or not) for the Mutex. Additionally the <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> can transfer ownership to a <a class="link" href="classboost_1_1interprocess_1_1scoped__lock.html" title="Class template scoped_lock">scoped_lock</a> using transfer_lock syntax. The Mutex need not supply all of the functionality. If the client of upgradable_lock&lt;Mutex&gt; does not use functionality which the Mutex does not supply, no harm is done. Mutex ownership can be shared among read_locks, and a single <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a>. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> does not support copy semantics. However <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> supports ownership transfer from a upgradable_locks or scoped_locks via transfer_lock syntax. </p>
<div class="refsect2">
<a name="id-1.3.16.19.3.77.4.4.3"></a><h3>
<a name="id103-bb"></a><code class="computeroutput">upgradable_lock</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a68d8dac1f766e68900da742246e3a8c1"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: Default constructs a <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a>. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == false and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0. </p>
</li>
<li class="listitem"><pre class="literallayout"><span class="keyword">explicit</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a49fa914ef053f83c947044fa88ab8697"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span> m<span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a40b2c3d5a0a9fd771fe07ae504387da1"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span> m<span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1defer__lock__type.html" title="Struct defer_lock_type">defer_lock_type</a><span class="special">)</span><span class="special">;</span></pre>
<p>Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == false, and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == &amp;m. Notes: The constructor will not take ownership of the mutex. There is no effect required on the referenced mutex. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1ac188f1f038d567b04180d92af60c5ef9"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span> m<span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1accept__ownership__type.html" title="Struct accept_ownership_type">accept_ownership_type</a><span class="special">)</span><span class="special">;</span></pre>
<p>Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == true, and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == &amp;m. Notes: The constructor will suppose that the mutex is already upgradable locked. There is no effect required on the referenced mutex. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1aa7b6f931e2a5cf4e6a6fdda8357d671a"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span> m<span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1try__to__lock__type.html" title="Struct try_to_lock_type">try_to_lock_type</a><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: m.try_lock_upgradable(). Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == &amp;m. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == the return value of the m.try_lock_upgradable() executed within the constructor. Notes: The constructor will take upgradable-ownership of the mutex if it can do so without waiting. Whether or not this constructor handles recursive locking depends upon the mutex. If the mutex_type does not support try_lock_upgradable, this constructor will fail at compile time if instantiated, but otherwise have no effect. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> 
  <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1abc2a52295316a2eba52ec23b89cdef28"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="identifier">mutex_type</span> <span class="special">&amp;</span> m<span class="special">,</span> <span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span> abs_time<span class="special">)</span><span class="special">;</span></pre>
<p>Effects: m.timed_lock_upgradable(abs_time) Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == &amp;m. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == the return value of the m.timed_lock_upgradable() executed within the constructor. Notes: The constructor will take upgradable-ownership of the mutex if it can do so within the time specified. Whether or not this constructor handles recursive locking depends upon the mutex. If the mutex_type does not support timed_lock_upgradable, this constructor will fail at compile time if instantiated, but otherwise have no effect. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1aee55a7076287ca703d041495b64da3df"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a><span class="special">&lt;</span> <span class="identifier">mutex_type</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span> upgr<span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: No effects on the underlying mutex. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == the value upgr.mutex() had before the construction. upgr.mutex() == 0. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == upgr.owns() before the construction. upgr.owns() == false. Notes: If upgr is locked, this constructor will lock this <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> while unlocking upgr. If upgr is unlocked, then this <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> will be unlocked as well. Only a moved <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a>'s will match this signature. An non-moved <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> can be moved with the expression: "boost::move(lock);". This constructor does not alter the state of the mutex, only potentially who owns it. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> 
  <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1affe366f9e12737f528ffff2eef38f7bb"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1scoped__lock.html" title="Class template scoped_lock">scoped_lock</a><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span> scop<span class="special">,</span> <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If scop.owns(), m_.unlock_and_lock_upgradable(). Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == the value scop.mutex() had before the construction. scop.mutex() == 0. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == scop.owns() before the constructor. After the construction, scop.owns() == false. Notes: If scop is locked, this constructor will transfer the exclusive-ownership to an upgradable-ownership of this <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a>. Only a moved <a class="link" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">sharable_lock</a>'s will match this signature. An non-moved <a class="link" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">sharable_lock</a> can be moved with the expression: "boost::move(lock);". </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> T<span class="special">&gt;</span> 
  <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a49edf1be241f182290c1a7eb8419ed59"></a><span class="identifier">upgradable_lock</span><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">sharable_lock</a><span class="special">&lt;</span> <span class="identifier">T</span> <span class="special">&gt;</span> <span class="special">&amp;&amp;</span> shar<span class="special">,</span> <a class="link" href="structboost_1_1interprocess_1_1try__to__lock__type.html" title="Struct try_to_lock_type">try_to_lock_type</a><span class="special">,</span> 
                  <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> <span class="special">=</span> <span class="number">0</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If shar.owns() then calls try_unlock_sharable_and_lock_upgradable() on the referenced mutex. a)if try_unlock_sharable_and_lock_upgradable() returns true then <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> obtains the value from shar.release() and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> is set to true. b)if try_unlock_sharable_and_lock_upgradable() returns false then shar is unaffected and this <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> construction has the same effects as a default construction. c)Else shar.owns() is false. <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> obtains the value from shar.release() and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> is set to false. Notes: This construction will not block. It will try to obtain mutex ownership from shar immediately, while changing the lock type from a "read lock" to an "upgradable lock". If the "read lock" isn't held in the first place, the mutex merely changes type to an unlocked "upgradable lock". If the "read lock" is held, then mutex transfer occurs only if it can do so in a non-blocking manner. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a78db6b83c240c5c723948b71415b9139"></a><span class="special">~</span><span class="identifier">upgradable_lock</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: if (<a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a>) m_-&gt;unlock_upgradable(). Notes: The destructor behavior ensures that the mutex lock is not leaked. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> <span class="special">&amp;</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a57a84a215dd842070e1ca8968125475b"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> <span class="special">&amp;&amp;</span> upgr<span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a>, then unlock_upgradable() is called on <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a>. *this gets the state of upgr and upgr gets set to a default constructed state. Notes: With a recursive mutex it is possible that both this and upgr own the mutex before the assignment. In this case, this will own the mutex after the assignment (and upgr will not), but the mutex's upgradable lock count will be decremented by one. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a61ee4bc4a23cd960e478a86c1424f30e"></a><span class="identifier">lock</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0 or if already locked, throws a lock_exception() exception. Calls lock_upgradable() on the referenced mutex. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == true. Notes: The <a class="link" href="classboost_1_1interprocess_1_1sharable__lock.html" title="Class template sharable_lock">sharable_lock</a> changes from a state of not owning the mutex, to owning the mutex, blocking if necessary. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a11a01e6076b245f7ed76174ec3589d27"></a><span class="identifier">try_lock</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0 or if already locked, throws a lock_exception() exception. Calls try_lock_upgradable() on the referenced mutex. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == the value returned from <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a>-&gt;try_lock_upgradable(). Notes: The <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> changes from a state of not owning the mutex, to owning the mutex, but only if blocking was not required. If the mutex_type does not support try_lock_upgradable(), this function will fail at compile time if instantiated, but otherwise have no effect. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> TimePoint<span class="special">&gt;</span> <span class="keyword">bool</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af8c802df78488052baee3d25dd594d4f"></a><span class="identifier">timed_lock</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">TimePoint</span> <span class="special">&amp;</span> abs_time<span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0 or if already locked, throws a lock_exception() exception. Calls timed_lock_upgradable(abs_time) on the referenced mutex. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == the value returned from <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a>-&gt;timed_lock_upgradable(abs_time). Notes: The <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> changes from a state of not owning the mutex, to owning the mutex, but only if it can obtain ownership within the specified time. If the mutex_type does not support timed_lock_upgradable(abs_time), this function will fail at compile time if instantiated, but otherwise have no effect. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a395b2447a0df20c51e31bda350b2a6b9"></a><span class="identifier">unlock</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Effects: If <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0 or if not locked, throws a lock_exception() exception. Calls unlock_upgradable() on the referenced mutex. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == false. Notes: The <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a> changes from a state of owning the mutex, to not owning the mutex. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e"></a><span class="identifier">owns</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: Returns true if this <a class="link" href="classboost_1_1interprocess_1_1scoped__lock.html" title="Class template scoped_lock">scoped_lock</a> has acquired the referenced mutex. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a823dd0c2b6f5c0320cb4d26b0b3085b7"></a><span class="keyword">operator</span> <span class="identifier">unspecified_bool_type</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Conversion to bool. Returns <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a>. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">mutex_type</span> <span class="special">*</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36"></a><span class="identifier">mutex</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: Returns a pointer to the referenced mutex, or 0 if there is no mutex to reference. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="identifier">mutex_type</span> <span class="special">*</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a84ca78763a83e337b9011fcd762e3156"></a><span class="identifier">release</span><span class="special">(</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: Returns a pointer to the referenced mutex, or 0 if there is no mutex to reference. Postconditions: <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1af40cf6338af4d39e5e49d1ec888adb36">mutex()</a> == 0 and <a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html#doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1a4f37ab2685ab5ac3fb1c1e947370569e">owns()</a> == false. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="doxygen.boost_interprocess_header_reference.classboost_1_1interprocess_1_1upgradable__lock_1ac859b4e52df2cfa46512e10e171b315a"></a><span class="identifier">swap</span><span class="special">(</span><a class="link" href="classboost_1_1interprocess_1_1upgradable__lock.html" title="Class template upgradable_lock">upgradable_lock</a><span class="special">&lt;</span> <span class="identifier">mutex_type</span> <span class="special">&gt;</span> <span class="special">&amp;</span> other<span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span></pre>
<p>Effects: Swaps state with moved lock. Throws: Nothing. </p>
</li>
</ol></div>
</div>
</div>
</div>
<div class="copyright-footer">Copyright Â© 2005-2024 Ion Gaztanaga<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="classboost_1_1interprocess_1_1sharable__lock.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../interprocess/indexes_reference.html#doxygen.boost_interprocess_header_reference.upgradable__lock_8hpp"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="classboost_1_1interprocess_1_1usduration.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
