<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Parsing :: Boost Libraries Documentation</title>
  <link rel="canonical" href="https://antora.cppalliance.org/master/lib/doc/url/urls/parsing.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="containers.html">
  <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/boostlook.css">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../_/img/favicons/favicon.ico" type="image/x-icon">
    <!-- Favicon configuration -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../_/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../_/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../_/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="../../_/img/favicons/site.webmanifest">
    <link rel="shortcut icon" href="../../_/img/favicons/favicon.ico">
  </head>
  <body class="article toc2 toc-left">
    <div class="boostlook">
  <div id="header">
    <div id="toc" class="nav-container toc2" data-component="url" data-version="">
  <aside class="nav">
    <button class="nav-close"></button>
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
      <h3 class="title"><a href="../index.html">Boost.URL</a></h3>
      <ul class="nav-list">
        <ul class="nav-list">
        <li class="" data-depth="1">
            <a class="nav-link" href="../quicklook.html">Quick Look</a>
        </li>
              <li class="" data-depth="1">
            <a class="nav-link" href="index.html">URLs</a>
        </li>
        <ul class="nav-list">
        <li class=" is-current-page" data-depth="2">
            <a class="nav-link" href="parsing.html">Parsing</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="containers.html">Containers</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="segments.html">Segments</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="params.html">Params</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="normalization.html">Normalization</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="stringtoken.html">String Token</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="percent-encoding.html">Percent Encoding</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="formatting.html">Formatting</a>
        </li>
        </ul>
        <li class="" data-depth="1">
            <a class="nav-link" href="../grammar/index.html">Customization</a>
        </li>
        <ul class="nav-list">
        <li class="" data-depth="2">
            <a class="nav-link" href="../grammar/rules.html">Parse Rules</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../grammar/charset.html">Character Sets</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../grammar/combinators.html">Compound Rules</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../grammar/range.html">Ranges</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../grammar/rfc3986.html">RFC 3986</a>
        </li>
        </ul>
        <li class="" data-depth="1">
            <span class="nav-text">Examples</span>
        </li>
        <ul class="nav-list">
        <li class="" data-depth="2">
            <a class="nav-link" href="../examples/qrcode.html">QR Code</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/finicky.html">Finicky</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/mailto.html">mailto URLs</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/magnet-link.html">Magnet Link</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/file-router.html">File Router</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/router.html">Router</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="../examples/sanitize.html">Sanitizing URLs</a>
        </li>
        </ul>
        <li class="" data-depth="1">
            <a class="nav-link" href="../reference.html">Reference</a>
        </li>
              <li class="" data-depth="1">
            <a class="nav-link" href="../HelpCard.html">Help Card</a>
        </li>
        </ul>
  </ul>
  </nav>
</div>
    </div>
  </aside>
</div>
</div>
  <div id="content">
    <article class="doc max-width-reset">
  <div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>
      <a href="../index.html" aria-label="Home: Boost.URL">
        <svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 -960 960 960" fill="#000000" aria-hidden="true"><path d="M160-120v-480l320-240 320 240v480H560v-280H400v280H160Z"/></svg>
      </a>
    </li>
    <li><a href="index.html">URLs</a></li>
    <li><a href="parsing.html">Parsing</a></li>
  </ul>
</nav>
<div class="spirit-nav">
    <a accesskey="p" href="index.html"><span class="material-symbols-outlined" title="Previous: URLs">arrow_back</span></a>
    <a accesskey="p" href="index.html"><span class="material-symbols-outlined" title="Up: URLs">arrow_upward</span></a>
    <a accesskey="p" href="containers.html"><span class="material-symbols-outlined" title="Next: Containers">arrow_forward</span></a>
</div>
</div>
    <h1 class="page">Parsing</h1>
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Algorithms which parse URLs return a view which references the underlying character buffer without taking ownership, avoiding memory allocations and copies.
The following example parses a string literal containing a
<a href="https://datatracker.ietf.org/doc/html/rfc3986#section-3" target="blank_"><em>URI</em></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">boost::core::string_view s = "https://user:pass@example.com:443/path/to/my%2dfile.txt?id=42&amp;name=John%20Doe+Jingleheimer%2DSchmidt#page%20anchor";</code></pre>
</div>
</div>
<div class="paragraph">
<p>The function returns a <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_resultt_e" target="_blank" rel="noopener">result</a></code> which holds a <code><a href="../reference/boost/urls/url_view.html" class="xref page">url_view</a></code>
if the string is a valid URL.
Otherwise it holds an <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_error_code" target="_blank" rel="noopener">error_code</a></code>.
It is impossible to construct a <code><a href="../reference/boost/urls/url_view.html" class="xref page">url_view</a></code> which refers to an invalid URL.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The caller is responsible for ensuring that the lifetime of the character buffer extends until it is no longer referenced by the view.
These are the same semantics as that of <code><a href="https://en.cppreference.com/w/cpp/string/basic_string_view" target="_blank" rel="noopener">std::string_view</a></code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For convenience, a URL view can be constructed directly from the character buffer in a <code><a href="../reference/boost/urls/string_view.html" class="xref page">string_view</a></code>.
In this case, it parses the string according to the
<a href="https://datatracker.ietf.org/doc/html/rfc3986#section-4.1" target="blank_"><em>URI-reference</em></a>
grammar, throwing an exception upon failure.
The following two statements are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">boost::system::result&lt;url_view&gt; r = parse_uri( s );</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this library, free functions which parse things are named with the word "parse" followed by the name of the grammar used to match the string.
There are several varieties of URLs, and depending on the use-case a particular grammar may be needed.
In the target of an HTTP GET request for example, the scheme and fragment are omitted.
This corresponds to the
<a href="https://datatracker.ietf.org/doc/html/rfc7230#section-5.3.1" target="blank_"><em>origin-form</em></a>
production rule described in <a href="https://tools.ietf.org/html/rfc7230" target="blank_">rfc7230</a>.
The function
<code><a href="../reference/boost/urls/parse_origin_form.html" class="xref page">parse_origin_form</a></code>
is suited for this purpose.
All the URL parsing functions are listed here:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Grammar</th>
<th class="tableblock halign-left valign-top">Example</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><a href="../reference/boost/urls/parse_absolute_uri.html" class="xref page">parse_absolute_uri</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://datatracker.ietf.org/doc/html/rfc3986#section-4.3" target="blank_"><em>absolute-URI</em></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http://www.boost.org/index.html?field=value</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No fragment</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><a href="../reference/boost/urls/parse_origin_form.html" class="xref page">parse_origin_form</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://datatracker.ietf.org/doc/html/rfc7230#section-5.3.1" target="blank_"><em>origin-form</em></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/index.html?field=value</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used in HTTP</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><a href="../reference/boost/urls/parse_relative_ref.html" class="xref page">parse_relative_ref</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://datatracker.ietf.org/doc/html/rfc3986#section-4.2" target="blank_"><em>relative-ref</em></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>//www.boost.org/index.html?field=value#downloads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><a href="../reference/boost/urls/parse_uri.html" class="xref page">parse_uri</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://datatracker.ietf.org/doc/html/rfc3986#section-3" target="blank_"><em>URI</em></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http://www.boost.org/index.html?field=value#downloads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><a href="../reference/boost/urls/parse_uri_reference.html" class="xref page">parse_uri_reference</a></code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://datatracker.ietf.org/doc/html/rfc3986#section-4.1" target="blank_"><em>URI-reference</em></a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http://www.boost.org/index.html</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Any <em>URI</em> or <em>relative-ref</em></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The URL is stored in its serialized form.
Therefore, it can always be easily output, sent, or embedded as part of a protocol:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">url u = parse_uri_reference( "https://www.example.com/path/to/file.txt" ).value();

assert(u.encoded_path() == "/path/to/file.txt");</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code><a href="../reference/boost/urls/url.html" class="xref page">url</a></code> is an allocating container which owns its character buffer.
Upon construction from <code><a href="../reference/boost/urls/url_view.html" class="xref page">url_view</a></code>, it allocates dynamic storage to hold a copy of the string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">boost::system::result&lt; url &gt; rv = parse_uri_reference( "https://www.example.com/path/to/file.txt" );

static_assert( std::is_convertible&lt; boost::system::result&lt; url_view &gt;, boost::system::result&lt; url &gt; &gt;::value, "" );</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code><a href="../reference/boost/urls/static_url.html" class="xref page">static_url</a></code> is a container which owns its character buffer for a URL whose maximum size is known.
Upon construction from
<code><a href="../reference/boost/urls/url_view.html" class="xref page">url_view</a></code>, it does not perform any dynamic memory allocations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">boost::system::result&lt; static_url&lt;1024&gt; &gt; rv = parse_uri_reference( "https://www.example.com/path/to/file.txt" );

static_assert( std::is_convertible&lt; boost::system::result&lt; static_url&lt;1024&gt; &gt;, boost::system::result&lt; url &gt; &gt;::value, "" );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_result_type"><a class="anchor" href="#_result_type"></a>Result Type</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These functions have a return type which uses the <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_resultt_e" target="_blank" rel="noopener">result</a></code> alias template.
This class allows the parsing algorithms to report errors without referring to exceptions.</p>
</div>
<div class="paragraph">
<p>The functions <code>result::operator bool()</code> and <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_unchecked_value_access" target="_blank" rel="noopener">result::operator*</a></code>
can be used to check if the result contains an error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">boost::system::result&lt; url &gt; ru = parse_uri_reference( "https://www.example.com/path/to/file.txt" );
if ( ru )
{
    url u = *ru;
    assert(u.encoded_path() == "/path/to/file.txt");
}
else
{
    boost::system::error_code e = ru.error();
    handle_error(e);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since <code>result::operator bool()</code> is already checking if <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_resultt_e" target="_blank" rel="noopener">result</a></code> contains an error, <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_unchecked_value_access" target="_blank" rel="noopener">result::operator*</a></code> provides an unchecked alternative to get a value from <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_resultt_e" target="_blank" rel="noopener">result</a></code>.
In contexts where it is acceptable to throw errors,
<code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_checked_value_access_2" target="_blank" rel="noopener">result::value</a></code> can be used directly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">try
{
    url u = parse_uri_reference( "https://www.example.com/path/to/file.txt" ).value();
    assert(u.encoded_path() == "/path/to/file.txt");
}
catch (boost::system::system_error &amp;e)
{
    handle_error(e);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the reference for <code><a href="https://www.boost.org/doc/libs/master/libs/system/doc/html/system.html#ref_resultt_e" target="_blank" rel="noopener">result</a></code> for a synopsis of the type.</p>
</div>
</div>
</div>
  <div class="edit-this-page">
      <a href="https://github.com/boostorg/url/edit/develop/doc/modules/ROOT/pages/urls/parsing.adoc">Edit this Page</a>
      </div>
      <nav class="pagination">
        <span class="prev"><a href="index.html">URLs</a></span>
        <span class="next"><a href="containers.html">Containers</a></span>
    </nav>
</article>
</div>
  <div id="footer">
  <script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
</div>
</div>
  </body>
</html>
