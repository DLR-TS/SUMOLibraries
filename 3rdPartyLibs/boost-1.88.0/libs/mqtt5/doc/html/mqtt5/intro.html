<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Introduction</title>
<link rel="stylesheet" href="../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../index.html" title="Chapter 1. Boost.MQTT5: a C++17 MQTT client">
<link rel="up" href="../index.html" title="Chapter 1. Boost.MQTT5: a C++17 MQTT client">
<link rel="prev" href="../index.html" title="Chapter 1. Boost.MQTT5: a C++17 MQTT client">
<link rel="next" href="getting_started.html" title="Getting Started">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="getting_started.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mqtt5.intro"></a><a class="link" href="intro.html" title="Introduction">Introduction</a>
</h2></div></div></div>
<p>
      <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a> is a C++17
      client built on <a href="../../../../../libs/asio/index.html" target="_top">Boost.Asio</a>.
      This client is designed for publishing or receiving messages from an MQTT 5.0
      compatible Broker. <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a>
      represents a comprehensive implementation of the MQTT 5.0 protocol standard,
      offering full support for publishing or receiving messages with QoS 0, 1, and
      2.
    </p>
<h4>
<a name="mqtt5.intro.h0"></a>
      <span class="phrase"><a name="mqtt5.intro.motivation"></a></span><a class="link" href="intro.html#mqtt5.intro.motivation">Motivation</a>
    </h4>
<p>
      The <a href="https://mqtt.org/" target="_top">MQTT</a> protocol is widely utilised
      for communication in various real-world scenarios, primarily serving as a reliable
      communication protocol for data transfer to and from IoT devices. While the
      MQTT protocol is relatively straightforward, integrating it into an application
      can be complex, primarily due to the challenging implementation of message
      retransmission after a disconnect/reconnect sequence. To address these challenges
      and simplify MQTT integration once and for all, <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a>
      was designed with the following core objectives in mind:
    </p>
<div class="table">
<a name="mqtt5.intro.objectives"></a><p class="title"><b>Table 1.1. Core objectives</b></p>
<div class="table-contents"><table class="table" summary="Core objectives">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
              <p>
                Objective
              </p>
            </th>
<th>
              <p>
                Description
              </p>
            </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                "Plug and play" interface that abstracts away MQTT protocol
                internals, low-level network events, message retransmission and other
                complexities
              </p>
            </td>
<td>
              <p>
                Enables developers to publish or receive messages with just a single
                line of code, significantly reducing the learning curve and development
                time. Getting started requires basic MQTT knowledge, making the library
                accessible to developers of all skill levels.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                Highly reliable and robust Client that handles network losses, unreliable
                data transport, network latencies, and other unpredictable events
              </p>
            </td>
<td>
              <p>
                The Client does not expose connect functions (nor asynchronous connect
                functions); instead, network connectivity, MQTT handshake, and message
                retransmission are automatically handled within the Client while
                strictly adhering to the MQTT specification. This automation eliminates
                the need for developers to write extensive and error-prone code to
                handle these scenarios, allowing them to focus on the application's
                core functionality.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                Complete adherence to the Boost.Asio's universal asynchronous model
              </p>
            </td>
<td>
              <p>
                The interfaces and implementation strategies are built upon the foundations
                of Boost.Asio. This compatibility enables seamless integration with
                any other library within the Boost.Asio ecosystem.
              </p>
            </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><h4>
<a name="mqtt5.intro.h1"></a>
      <span class="phrase"><a name="mqtt5.intro.when_to_use"></a></span><a class="link" href="intro.html#mqtt5.intro.when_to_use">When
      to Use</a>
    </h4>
<p>
      <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a> might be
      suitable for you if any of the following statements is true:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          Your application uses <a href="../../../../../libs/asio/index.html" target="_top">Boost.Asio</a>
          and requires integrating an MQTT Client.
        </li>
<li class="listitem">
          You require asynchronous access to an MQTT Broker.
        </li>
<li class="listitem">
          You are developing a higher-level component that requires a connection
          to an MQTT Broker.
        </li>
<li class="listitem">
          You require a dependable and resilient MQTT Client to manage all network-related
          issues automatically.
        </li>
</ul></div>
<p>
      It may not be suitable for you if:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          You solely require synchronous access to an MQTT Broker.
        </li>
<li class="listitem">
          The MQTT Broker you connect to does not support the MQTT 5 version.
        </li>
</ul></div>
<h4>
<a name="mqtt5.intro.h2"></a>
      <span class="phrase"><a name="mqtt5.intro.features0"></a></span><a class="link" href="intro.html#mqtt5.intro.features0">Features</a>
    </h4>
<p>
      <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a> is a library
      designed with the core belief that users should focus solely on their application
      logic, not the network complexities. <br> The library attempts to embody
      this belief with a range of key features designed to elevate the development
      experience:
    </p>
<div class="table">
<a name="mqtt5.intro.features"></a><p class="title"><b>Table 1.2. Features</b></p>
<div class="table-contents"><table class="table" summary="Features">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
              <p>
                Feature
              </p>
            </th>
<th>
              <p>
                Description
              </p>
            </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                <span class="bold"><strong>Complete TCP, TLS/SSL, and WebSocket support</strong></span>
              </p>
            </td>
<td>
              <p>
                The MQTT protocol requires an underlying network protocol that provides
                ordered, lossless, bi-directional connection (stream). Users can
                customize this stream through a template parameter. The Boost.MQTT5
                library has been tested with the most used transport protocols: TCP/IP
                using <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">ip</span><span class="special">::</span><span class="identifier">tcp</span><span class="special">::</span><span class="identifier">socket</span></code>, TLS/SSL using <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">ssl</span><span class="special">::</span><span class="identifier">stream</span></code>, WebSocket/TCP and WebSocket/TLS
                using <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">beast</span><span class="special">::</span><span class="identifier">websocket</span><span class="special">::</span><span class="identifier">stream</span></code>).
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Automatic reconnect and retry mechanism</strong></span>
              </p>
            </td>
<td>
              <p>
                Automatically handles connection loss, backoffs, reconnections, and
                message transmissions. Automating these processes enables users to
                focus entirely on the application's functionality. See <a class="link" href="auto_reconnect.html" title="Built-in Auto-Reconnect and Retry Mechanism">Built-in
                Auto-Reconnect and Retry Mechanism</a>.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Prioritised efficiency</strong></span>
              </p>
            </td>
<td>
              <p>
                Utilises network and memory resources as efficiently as possible.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Minimal memory footprint</strong></span>
              </p>
            </td>
<td>
              <p>
                Ensures optimal performance in resource-constrained environments
                typical of IoT devices.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Completion token</strong></span>
              </p>
            </td>
<td>
              <p>
                All asynchronous functions are implemented using Boost.Asio's universal
                asynchronous model and support CompletionToken. This allows versatile
                usage with callbacks, coroutines, and futures.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Custom allocators</strong></span>
              </p>
            </td>
<td>
              <p>
                Support for custom allocators allows extra flexibility and control
                over the memory resources. Boost.MQTT5 will use allocators associated
                with handlers from asynchronous functions to create instances of
                objects needed in the library implementation.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Per-operation cancellation</strong></span>
              </p>
            </td>
<td>
              <p>
                All asynchronous operations support individual, targeted cancellation
                as per Asio's <a href="../../../../../doc/html/boost_asio/overview/core/cancellation.html" target="_top">Per-Operation
                Cancellation</a>. This enables all asynchronous functions to
                be used in <a href="../../../../../doc/html/boost_asio/overview/composition/parallel_group.html" target="_top">Parallel
                Operations</a>, which is especially beneficial for executing
                operations that require a timeout mechanism.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Full implementation of MQTT 5.0 specification</strong></span>
              </p>
            </td>
<td>
              <p>
                Ensures full compatibility with <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html" target="_top">MQTT
                5.0 standard</a>. This latest version introduces essential features
                that enhance system robustness, including advanced error-handling
                mechanisms, session and message expiry, and other improvements designed
                to support modern IoT use cases.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Support for QoS 0, QoS 1, and QoS 2</strong></span>
              </p>
            </td>
<td>
              <p>
                Fully implements all quality-of-service levels defined by the MQTT
                protocol to match different reliability needs in message delivery.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Custom authentication</strong></span>
              </p>
            </td>
<td>
              <p>
                Defines an interface for your custom authenticators to perform <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901256" target="_top"><code class="computeroutput"><span class="identifier">Enhanced</span> <span class="identifier">Authentication</span></code></a>.
                In addition to username/password authentication, this customization
                point enables the implementation of any authentication mechanism
                supported by the SASL protocol, offering flexibility for advanced
                security requirements.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>High availability</strong></span>
              </p>
            </td>
<td>
              <p>
                Supports listing multiple Brokers within the same cluster to which
                the Client can connect. In the event of a connection failure with
                one Broker, the Client switches to the next in the list.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                <span class="bold"><strong>Offline buffering</strong></span>
              </p>
            </td>
<td>
              <p>
                Automatically buffers all requests made while offline, ensuring they
                are sent when the connection is re-established. This allows users
                to call any asynchronous function freely, regardless of current connection
                status.
              </p>
            </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><h4>
<a name="mqtt5.intro.h3"></a>
      <span class="phrase"><a name="mqtt5.intro.getting_started"></a></span><a class="link" href="intro.html#mqtt5.intro.getting_started">Getting
      Started</a>
    </h4>
<p>
      <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a> is a header-only
      library. To use <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a>
      it requires the following:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          <span class="bold"><strong>C++17 capable compiler</strong></span>
        </li>
<li class="listitem">
          <span class="bold"><strong>Boost 1.82 or later</strong></span>. In addition to Asio,
          we use other header-only libraries.
        </li>
<li class="listitem">
          <span class="bold"><strong>OpenSSL</strong></span>. If you require an SSL connection
          by using <a href="../../../../../doc/html/boost_asio/reference/ssl__stream.html" target="_top"><code class="literal">boost::asio::ssl::stream</code></a>.
        </li>
</ul></div>
<p>
      <a href="https://github.com/boostorg/mqtt5/" target="_top">Boost.MQTT5</a> has been
      tested with the following compilers:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          clang 12.0 - 18.0 (Linux)
        </li>
<li class="listitem">
          GCC 9 - 14 (Linux)
        </li>
<li class="listitem">
          MSVC 14.37 - Visual Studio 2022 (Windows)
        </li>
</ul></div>
<h4>
<a name="mqtt5.intro.h4"></a>
      <span class="phrase"><a name="mqtt5.intro.using_the_library"></a></span><a class="link" href="intro.html#mqtt5.intro.using_the_library">Using
      the Library</a>
    </h4>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
          Download <a href="https://www.boost.org/users/download/" target="_top">Boost</a>,
          and add it to your include path.
        </li>
<li class="listitem">
          If you use SSL, download <a href="https://www.openssl.org/" target="_top">OpenSSL</a>,
          link the library and add it to your include path.
        </li>
<li class="listitem">
          Add Boost.MQTT5's <code class="computeroutput"><span class="identifier">include</span></code>
          folder to your include path.
        </li>
</ol></div>
<p>
      You can compile the example below with the following command line on Linux:
    </p>
<pre class="programlisting"><span class="identifier">clang</span><span class="special">++</span> <span class="special">-</span><span class="identifier">std</span><span class="special">=</span><span class="identifier">c</span><span class="special">++</span><span class="number">17</span> <span class="special">&lt;</span><span class="identifier">source</span><span class="special">-</span><span class="identifier">cpp</span><span class="special">-</span><span class="identifier">file</span><span class="special">&gt;</span> <span class="special">-</span><span class="identifier">o</span> <span class="identifier">example</span> <span class="special">-</span><span class="identifier">I</span><span class="special">&lt;</span><span class="identifier">path</span><span class="special">-</span><span class="identifier">to</span><span class="special">-</span><span class="identifier">boost</span><span class="special">&gt;</span> <span class="special">-</span><span class="identifier">Iinclude</span> <span class="special">-</span><span class="identifier">pthread</span>
</pre>
<h4>
<a name="mqtt5.intro.h5"></a>
      <span class="phrase"><a name="mqtt5.intro.example"></a></span><a class="link" href="intro.html#mqtt5.intro.example">Example</a>
    </h4>
<p>
      The following example illustrates a scenario of configuring a Client and publishing
      a "Hello World!" Application Message with <code class="computeroutput"><span class="identifier">QoS</span></code>
      0.
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mqtt5</span><span class="special">/</span><span class="identifier">mqtt_client</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">mqtt5</span><span class="special">/</span><span class="identifier">types</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">asio</span><span class="special">/</span><span class="identifier">io_context</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">asio</span><span class="special">/</span><span class="identifier">detached</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">asio</span><span class="special">/</span><span class="identifier">ip</span><span class="special">/</span><span class="identifier">tcp</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">io_context</span> <span class="identifier">ioc</span><span class="special">;</span>

    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mqtt5</span><span class="special">::</span><span class="identifier">mqtt_client</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">ip</span><span class="special">::</span><span class="identifier">tcp</span><span class="special">::</span><span class="identifier">socket</span><span class="special">&gt;</span> <span class="identifier">c</span><span class="special">(</span><span class="identifier">ioc</span><span class="special">);</span>

    <span class="identifier">c</span><span class="special">.</span><span class="identifier">brokers</span><span class="special">(</span><span class="string">"&lt;your-mqtt-broker&gt;"</span><span class="special">,</span> <span class="number">1883</span><span class="special">)</span>
        <span class="special">.</span><span class="identifier">credentials</span><span class="special">(</span><span class="string">"&lt;your-client-id&gt;"</span><span class="special">,</span> <span class="string">"&lt;client-username&gt;"</span><span class="special">,</span> <span class="string">"&lt;client-pwd&gt;"</span><span class="special">)</span>
        <span class="special">.</span><span class="identifier">async_run</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">detached</span><span class="special">);</span>

    <span class="identifier">c</span><span class="special">.</span><span class="identifier">async_publish</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">mqtt5</span><span class="special">::</span><span class="identifier">qos_e</span><span class="special">::</span><span class="identifier">at_most_once</span><span class="special">&gt;(</span>
        <span class="string">"&lt;topic&gt;"</span><span class="special">,</span> <span class="string">"Hello world!"</span><span class="special">,</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mqtt5</span><span class="special">::</span><span class="identifier">retain_e</span><span class="special">::</span><span class="identifier">no</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mqtt5</span><span class="special">::</span><span class="identifier">publish_props</span> <span class="special">{},</span>
        <span class="special">[&amp;</span><span class="identifier">c</span><span class="special">](</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">mqtt5</span><span class="special">::</span><span class="identifier">error_code</span> <span class="identifier">ec</span><span class="special">)</span> <span class="special">{</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ec</span><span class="special">.</span><span class="identifier">message</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
            <span class="identifier">c</span><span class="special">.</span><span class="identifier">async_disconnect</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">detached</span><span class="special">);</span> <span class="comment">// disconnect and close the Client</span>
        <span class="special">}</span>
    <span class="special">);</span>

    <span class="identifier">ioc</span><span class="special">.</span><span class="identifier">run</span><span class="special">();</span>
<span class="special">}</span>
</pre>
<p>
      To see more examples, visit <a class="link" href="examples.html" title="Examples">Examples</a>.
    </p>
<h4>
<a name="mqtt5.intro.h6"></a>
      <span class="phrase"><a name="mqtt5.intro.acknowledgements"></a></span><a class="link" href="intro.html#mqtt5.intro.acknowledgements">Acknowledgements</a>
    </h4>
<p>
      We thank <a href="https://github.com/chriskohlhoff" target="_top">Christopher Kohlhoff</a>
      for his outstanding <a href="../../../../../libs/asio/index.html" target="_top">Boost.Asio</a>
      library, which inspired the design of all interfaces and implementation strategies.
    </p>
</div>
<div class="copyright-footer">Copyright © 2023-2025 Mireo<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="getting_started.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
